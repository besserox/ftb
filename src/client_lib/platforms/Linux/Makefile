all: $(FTB_LIB_PATH_SHARED)/lib$(FTB_LIB_LINUX_NAME).so $(FTB_LIB_PATH_STATIC)/lib$(FTB_LIB_LINUX_NAME).a

CFLAGS = $(CFLAGS_CLIENT)

clean:
	rm -f $(FTB_LIB_PATH_SHARED)/lib$(FTB_LIB_LINUX_NAME).so $(FTB_LIB_PATH_STATIC)/lib$(FTB_LIB_LINUX_NAME).a
	rm -f libftb.o

$(FTB_LIB_PATH_SHARED)/lib$(FTB_LIB_LINUX_NAME).so: libftb.o $(MANAGER_LIB_PATH_STATIC)/lib$(MANAGER_LIB_NAME).a
	mkdir -p $(FTB_LIB_PATH_SHARED)
	$(CC) -shared -o $@ $(CLIENT_LIB_OBJ) libftb.o $(MANAGER_LIB_PATH_STATIC)/lib$(MANAGER_LIB_NAME).a

$(FTB_LIB_PATH_STATIC)/lib$(FTB_LIB_LINUX_NAME).a: libftb.o $(MANAGER_LIB_PATH_STATIC)/lib$(MANAGER_LIB_NAME).a
	mkdir -p $(FTB_LIB_PATH_STATIC)
	cp -p $(MANAGER_LIB_PATH_STATIC)/lib$(MANAGER_LIB_NAME).a $@
	$(AR) -rc $@ $(CLIENT_LIB_OBJ) libftb.o 
	$(RANLIB) $@

libftb.o: libftb.c
	$(CC) $(CFLAGS) -c $<
